<div class="container mt-5">
  <h2>Solicitud de Ahorro</h2>
  <form [formGroup]="savingsForm" (ngSubmit)="onSubmit()">
    <div class="mb-3">
      <label for="totalSavingsAmount" class="form-label">Monto Total de Ahorro</label>
      <input
        type="number"
        class="form-control"
        id="totalSavingsAmount"
        formControlName="totalSavingsAmount"
        [max]="maxSavingsAmount"
      />
      <div *ngIf="savingsForm.get('totalSavingsAmount')?.invalid && (savingsForm.get('totalSavingsAmount')?.dirty || savingsForm.get('totalSavingsAmount')?.touched)" class="text-danger">
        <div *ngIf="savingsForm.get('totalSavingsAmount')?.errors?.['required']">Este campo es requerido.</div>
        <div *ngIf="savingsForm.get('totalSavingsAmount')?.errors?.['min']">El monto debe ser mayor a 0.</div>
        <div *ngIf="savingsForm.get('totalSavingsAmount')?.errors?.['max']">El monto no puede exceder de {{maxSavingsAmount}}.</div>
      </div>
    </div>

    <div class="mb-3">
      <label for="fortnight" class="form-label">Quincena</label>
      <select class="form-control" id="fortnight" formControlName="fortnight">
        <option value="" disabled selected>Seleccione una quincena</option>
        <option value="1">Primera Quincena</option>
        <option value="2">Segunda Quincena</option>
      </select>
      <div *ngIf="savingsForm.get('fortnight')?.invalid && (savingsForm.get('fortnight')?.dirty || savingsForm.get('fortnight')?.touched)" class="text-danger">
        <div *ngIf="savingsForm.get('fortnight')?.errors?.['required']">Este campo es requerido.</div>
      </div>
    </div>

    <div class="mb-3">
      <label for="month" class="form-label">Mes</label>
      <select class="form-control" id="month" formControlName="month">
        <option value="" disabled selected>Seleccione un mes</option>
        <option value="january">Enero</option>
        <option value="february">Febrero</option>
        <option value="march">Marzo</option>
        <option value="april">Abril</option>
        <option value="may">Mayo</option>
        <option value="june">Junio</option>
        <option value="july">Julio</option>
        <option value="august">Agosto</option>
        <option value="september">Septiembre</option>
        <option value="october">Octubre</option>
        <option value="november">Noviembre</option>
        <option value="december">Diciembre</option>
      </select>
      <div *ngIf="savingsForm.get('month')?.invalid && (savingsForm.get('month')?.dirty || savingsForm.get('month')?.touched)" class="text-danger">
        <div *ngIf="savingsForm.get('month')?.errors?.['required']">Este campo es requerido.</div>
      </div>
    </div>

    <div class="mb-3">
      <label for="savingLines" class="form-label">LÃ­neas de Ahorro</label>
      <div formArrayName="lines" *ngFor="let line of lines.controls; let i = index">
        <div class="form-check">
          <input class="form-check-input" type="checkbox" [formControlName]="i" id="line{{i}}">
          <label class="form-check-label" for="line{{i}}">
            {{ savingLines[i]?.nombre }}
          </label>
        </div>
      </div>
    </div>

    <button type="submit" class="btn btn-primary" [disabled]="savingsForm.invalid">Enviar Solicitud</button>
  </form>
</div>
