<div class="container mt-3">
  <h4>Generar reportes por intervalo de fechas</h4>
  <div class="date-filter">
    <p-calendar
      [(ngModel)]="startDate"
      placeholder="Fecha Inicio"
      inputId="startDate"
      [showIcon]="true"
      [iconDisplay]="'input'" 
      [dateFormat]="'yy-mm-dd'"
    ></p-calendar>
  
    <p-calendar
      [(ngModel)]="endDate"
      placeholder="Fecha Fin"
      inputId="endDate"
      [showIcon]="true"
      [iconDisplay]="'input'" 
      [dateFormat]="'yy-mm-dd'"
    ></p-calendar>
  
    <button
      pButton
      type="button"
      label="Filtrar"
      icon="pi pi-filter"
      class="p-button-primary"
      (click)="filterByDates()"
      [disabled]="isLoading"
    ></button>
  
    <button
      pButton
      type="button"
      label="Generar Reporte"
      icon="pi pi-file"
      class="p-button-success"
      (click)="generateZipForUsers()"
      [disabled]="users.length === 0 || isLoading"
    ></button>
  </div>  
  
  <div *ngIf="isLoading" class="loader-container">
    <i class="pi pi-spin pi-spinner"></i> Cargando...
  </div>

  <div *ngIf="users.length > 0 && !isLoading" class="results-container">
    <p>Se encontraron <strong>{{ users.length }}</strong> registros.</p>
  </div>
</div>

<p-messages
  *ngIf="users.length === 0 && startDate && endDate && !isLoading"
  severity="info"
  text="No se encontraron resultados con las fechas seleccionadas."
></p-messages>
